<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Clock Pro</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap');

        body { 
            background-color: #000000; 
            margin: 0; 
            overflow: hidden;
            font-family: 'JetBrains Mono', monospace;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
        }

        .glow-red {
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
        }

        .dot-glow {
            filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.8));
        }

        * {
            user-select: none;
            -webkit-user-drag: none;
        }
    </style>
</head>
<body>

    <div id="root" style="width: 100%; height: 100%;"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const App = () => {
            const [time, setTime] = useState(new Date());
            const [dimensions, setDimensions] = useState({ width: window.innerWidth, height: window.innerHeight });

            useEffect(() => {
                const interval = setInterval(() => setTime(new Date()), 50);
                const handleResize = () => setDimensions({ width: window.innerWidth, height: window.innerHeight });
                window.addEventListener('resize', handleResize);
                return () => {
                    clearInterval(interval);
                    window.removeEventListener('resize', handleResize);
                };
            }, []);

            const isSmall = dimensions.width < 400 || dimensions.height < 400;
            const hours = time.getHours().toString().padStart(2, '0');
            const minutes = time.getMinutes().toString().padStart(2, '0');
            const seconds = time.getSeconds();

            const dots = useMemo(() => {
                const temp = [];
                const radius = 43; 
                for (let i = 0; i < 60; i++) {
                    const angle = (i * 6 - 90) * (Math.PI / 180);
                    temp.push({ x: 50 + radius * Math.cos(angle), y: 50 + radius * Math.sin(angle), index: i });
                }
                return temp;
            }, []);

            // Dynamische Größenberechnung basierend auf dem verfügbaren Platz
            const clockSize = Math.min(dimensions.width, dimensions.height) * 0.9;
            const fontSizeTime = Math.min(dimensions.width, dimensions.height) * 0.22;
            const fontSizeSec = Math.min(dimensions.width, dimensions.height) * 0.08;

            return (
                <div className="w-full h-full flex items-center justify-center p-2 relative">
                    
                    {/* Uhr-Container */}
                    <div style={{ width: clockSize, height: clockSize }} className="relative flex items-center justify-center">
                        
                        {/* Sekunden-Punkte */}
                        <svg viewBox="0 0 100 100" className="absolute inset-0 w-full h-full pointer-events-none overflow-visible">
                            {dots.map((dot) => {
                                const isActive = dot.index <= seconds;
                                return (
                                    <circle
                                        key={dot.index}
                                        cx={dot.x}
                                        cy={dot.y}
                                        r={isActive ? "1.0" : "0.5"}
                                        className={`transition-all duration-300 ${isActive ? 'fill-red-600 dot-glow' : 'fill-zinc-800'}`}
                                    />
                                );
                            })}
                        </svg>

                        {/* Zeit-Anzeige */}
                        <div className="flex flex-col items-center">
                            <div className="flex items-baseline">
                                <span style={{ fontSize: fontSizeTime }} className="font-black tracking-tighter tabular-nums glow-red leading-none">
                                    {hours}:{minutes}
                                </span>
                            </div>
                            <span style={{ fontSize: fontSizeSec }} className="font-bold text-red-600 tabular-nums -mt-2">
                                {seconds.toString().padStart(2, '0')}
                            </span>
                        </div>
                    </div>

                    {/* Footer - wird nur angezeigt wenn Platz da ist */}
                    {!isSmall && (
                        <div className="absolute bottom-4 inset-x-4 flex justify-between items-center opacity-40">
                            <span className="text-[8px] font-bold uppercase tracking-widest">Studio Master</span>
                            <div className="bg-red-600/20 px-2 py-0.5 rounded text-[8px] font-black tracking-widest text-red-500">ON AIR</div>
                            <span className="text-[8px] font-bold uppercase tracking-widest">KW {getWeekNumber(time)}</span>
                        </div>
                    )}
                </div>
            );
        };

        function getWeekNumber(d) {
            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
            var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
            return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
