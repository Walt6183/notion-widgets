import React, { useState, useEffect } from 'react';
import { Rocket } from 'lucide-react';

export default function App() {
  // Ziel: 31. Juli 2026 (Monat ist 0-basiert, also 6 = Juli)
  const TARGET_DATE = new Date(2026, 6, 31); 
  const EVENT_TITLE = "Countdown";

  const [timeLeft, setTimeLeft] = useState(0);

  const calculateTimeLeft = () => {
    const difference = TARGET_DATE.getTime() - new Date().getTime();
    let timeLeft = {};

    if (difference > 0) {
      timeLeft = {
        days: Math.floor(difference / (1000 * 60 * 60 * 24)),
        hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
        minutes: Math.floor((difference / 1000 / 60) % 60),
        seconds: Math.floor((difference / 1000) % 60),
      };
    } else {
      timeLeft = { days: 0, hours: 0, minutes: 0, seconds: 0 };
    }

    setTimeLeft(timeLeft);
  };

  useEffect(() => {
    calculateTimeLeft();
    const timerId = setInterval(calculateTimeLeft, 1000);
    return () => clearInterval(timerId);
  }, []);

  const timerComponents = [];
  const labels = { days: 'Tage', hours: 'Std', minutes: 'Min', seconds: 'Sek' };

  Object.keys(timeLeft).forEach((interval) => {
    if (timeLeft[interval] !== undefined) {
      timerComponents.push(
        <div key={interval} className="flex flex-col items-center justify-center p-2 min-w-[60px]">
          <span className="text-3xl font-extrabold tabular-nums text-stone-800 md:text-4xl">
            {String(timeLeft[interval]).padStart(2, '0')}
          </span>
          <span className="text-[10px] font-medium uppercase tracking-widest text-stone-500">
            {labels[interval]}
          </span>
        </div>
      );
    }
  });

  const formattedTargetDate = TARGET_DATE.toLocaleDateString('de-DE', {
    day: 'numeric',
    month: 'long',
    year: 'numeric',
  });

  return (
    <div className="flex h-screen w-full items-center justify-center bg-gray-50 p-4 font-sans">
      <div className="w-full max-w-md overflow-hidden rounded-2xl bg-white shadow-xl ring-1 ring-black/5">
        
        {/* Header */}
        <div className="bg-orange-500 p-5 text-white">
          <div className="flex items-center space-x-3">
            <Rocket className="h-6 w-6 text-orange-200" />
            <h2 className="text-xl font-bold tracking-tight">{EVENT_TITLE}</h2>
          </div>
          <p className="mt-1 text-xs font-light text-orange-200">
            Ziel: {formattedTargetDate}
          </p>
        </div>

        {/* Timer Anzeige */}
        <div className="p-6 flex justify-center">
          {timerComponents.length ? (
            <div className="flex space-x-2 md:space-x-4 border-b border-stone-100 pb-4">
              {timerComponents}
            </div>
          ) : (
            <div className="text-center text-lg font-bold text-orange-600">
              Der 31.7.2026 ist erreicht!
            </div>
          )}
        </div>
        
        <div className="bg-stone-50 px-5 py-2 text-center text-[10px] text-stone-400 border-t border-stone-200">
          Bis zum gro√üen Tag.
        </div>
      </div>
    </div>
  );
}